<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸“ä¸šé©¬æ‹‰æ¾é…é€ŸåŠ©æ‰‹</title>
    <style>
        :root { --primary: #2563eb; --secondary: #10b981; --bg: #f1f5f9; }
        body { font-family: system-ui, -apple-system, sans-serif; background: var(--bg); padding: 15px; display: flex; justify-content: center; }
        .container { background: white; width: 100%; max-width: 500px; padding: 1.5rem; border-radius: 16px; box-shadow: 0 10px 25px rgba(0,0,0,0.05); }
        h2 { text-align: center; color: #1e293b; margin-bottom: 1.5rem; }
        .input-card { background: #f8fafc; padding: 1rem; border-radius: 12px; margin-bottom: 1.5rem; border: 1px solid #e2e8f0; }
        label { display: block; font-size: 0.875rem; font-weight: 600; color: #64748b; margin-bottom: 0.5rem; }
        select, input { width: 100%; padding: 12px; border: 1px solid #cbd5e1; border-radius: 8px; font-size: 1rem; box-sizing: border-box; }
        .time-inputs { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; }
        .result-main { background: var(--primary); color: white; padding: 1.5rem; border-radius: 12px; text-align: center; margin-bottom: 1.5rem; }
        .result-main div { font-size: 0.9rem; opacity: 0.9; }
        .result-main strong { font-size: 2.2rem; display: block; margin-top: 5px; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 0.9rem; }
        th { text-align: left; color: #64748b; padding: 8px; border-bottom: 2px solid #e2e8f0; }
        td { padding: 10px 8px; border-bottom: 1px solid #f1f5f9; color: #334155; }
        .highlight { font-weight: bold; color: var(--primary); }
    </style>
</head>
<body>

<div class="container">
    <h2>ğŸƒ é©¬æ‹‰æ¾é…é€ŸåŠ©æ‰‹</h2>
    
    <div class="input-card">
        <label>è®¾å®šä½ çš„ç›®æ ‡è·ç¦»</label>
        <select id="distance">
            <option value="42195">å…¨ç¨‹é©¬æ‹‰æ¾ (42.195km)</option>
            <option value="21097.5">åŠç¨‹é©¬æ‹‰æ¾ (21.0975km)</option>
            <option value="10000">10 å…¬é‡Œ</option>
            <option value="5000">5 å…¬é‡Œ</option>
        </select>
        <label style="margin-top:15px">è®¾å®šç›®æ ‡å®Œæˆæ—¶é—´</label>
        <div class="time-inputs">
            <input type="number" id="hh" placeholder="æ—¶" value="4">
            <input type="number" id="mm" placeholder="åˆ†" value="00">
            <input type="number" id="ss" placeholder="ç§’" value="00">
        </div>
    </div>

    <div class="result-main">
        <div>è¦æ±‚çš„å¹³å‡é…é€Ÿ</div>
        <strong id="paceDisplay">--:--</strong>
        <span id="speedDisplay" style="font-size: 0.8rem;">æ—¶é€Ÿ: -- km/h</span>
    </div>

    <label>é¢„è®¡åˆ†æ®µæˆç»© (Split Times)</label>
    <table>
        <thead>
            <tr><th>é‡Œç¨‹</th><th>æ—¶é—´</th><th>é…é€Ÿ</th></tr>
        </thead>
        <tbody id="splitsTable">
            </tbody>
    </table>
</div>

<script>
    const inputs = ['distance', 'hh', 'mm', 'ss'].map(id => document.getElementById(id));
    
    function formatTime(totalSeconds) {
        const h = Math.floor(totalSeconds / 3600);
        const m = Math.floor((totalSeconds % 3600) / 60);
        const s = Math.round(totalSeconds % 60);
        return [h, m, s].map(v => v.toString().padStart(2, '0')).join(':');
    }

    function calculate() {
        const dist = parseFloat(inputs[0].value);
        const totalSec = (parseInt(inputs[1].value)||0)*3600 + (parseInt(inputs[2].value)||0)*60 + (parseInt(inputs[3].value)||0);
        
        if (totalSec <= 0) return;

        const pacePerKm = totalSec / (dist / 1000);
        const pMin = Math.floor(pacePerKm / 60);
        const pSec = Math.round(pacePerKm % 60);
        const paceStr = `${pMin}'${pSec.toString().padStart(2, '0')}"`;
        
        document.getElementById('paceDisplay').innerText = paceStr;
        document.getElementById('speedDisplay').innerText = `å¹³å‡æ—¶é€Ÿ: ${( (dist/1000) / (totalSec/3600) ).toFixed(2)} km/h`;

        // ç”Ÿæˆåˆ†æ®µè¡¨
        const checkpoints = [5000, 10000, 15000, 21097.5, 30000, 35000, 42195];
        let html = '';
        checkpoints.forEach(cp => {
            if (cp <= dist || (dist > 21000 && cp <= 42195)) {
                const cpTime = (totalSec * (cp / dist));
                const label = cp === 21097.5 ? "åŠé©¬" : cp === 42195 ? "å…¨é©¬" : (cp/1000) + "k";
                html += `<tr><td>${label}</td><td class="highlight">${formatTime(cpTime)}</td><td>${paceStr}/km</td></tr>`;
            }
        });
        document.getElementById('splitsTable').innerHTML = html;
    }

    inputs.forEach(el => el.addEventListener('input', calculate));
    calculate();
</script>

</body>
</html>
